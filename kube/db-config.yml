apiVersion: v1
kind: ConfigMap
metadata:
  name: derp-init-sql
  namespace: derp
data:
  # property-like keys; each key maps to a simple value
  derp-db-init: |
    -- Initialization script for the dadabase

    CREATE SCHEMA dadabase AUTHORIZATION dad;

    CREATE TABLE dadabase.audience (
      id int4 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE) NOT NULL,
      audiencename varchar NULL,
      description varchar NULL,
      CONSTRAINT audience_pkey PRIMARY KEY (id)
    );

    CREATE TABLE dadabase.joke (
      id int4 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE) NOT NULL,
      jokename varchar NULL,
      joketext varchar NULL,
      CONSTRAINT joke_pkey PRIMARY KEY (id)
    );

    INSERT INTO dadabase.joke (jokename,joketext) VALUES
      ('Chicken Road','Why did the chicken cross the road? To get to the other side!'),
      ('Fly','What do you call a fly with no wings?  A walk!'),
      ('Dad Joke Dad Joke','I don''t always tell dad jokes, but when I do he laughs. '),
      ('Internet Tree Joke','How do trees get on the Internet? They log in.');

    INSERT INTO dadabase.audience (audiencename,description) VALUES
      ('school people','the people at school'),
      ('school','everyone at school'),
      ('work','the people at work'),
      ('Friends','The homies'),
      ('Online Friends','The people I meet on the internet');
      